# ============================================================================
# S3/MinIO Configuration - SECURITY HARDENED
# ============================================================================
# Copy this file to .env.local and fill in your actual credentials
# NEVER commit .env.local to version control
# ============================================================================

# Issue #1 & #5: Required credentials (NO DEFAULTS)
# These MUST be set or the application will fail-fast at startup
MINIO_ACCESS_KEY=your_access_key_here
MINIO_SECRET_KEY=your_secret_key_here

# Issue #5: Required bucket configuration
MINIO_BUCKET=aeon-documents

# Issue #4: Endpoint configuration (use HTTPS in production)
# Development (HTTP allowed):
MINIO_ENDPOINT=http://openspg-minio:9000

# Production (HTTPS required):
# MINIO_ENDPOINT=https://openspg-minio:9000

# Environment
NODE_ENV=development  # Set to 'production' in production

# ============================================================================
# SECURITY NOTES
# ============================================================================

# 1. NEVER use hardcoded credentials
#    - All credentials must be set via environment variables
#    - No fallback values will be used
#    - Application will fail-fast if credentials are missing

# 2. HTTPS in Production
#    - Production deployments MUST use HTTPS endpoints
#    - A warning will be logged if production uses HTTP
#    - Use TLS/SSL certificates for all production traffic

# 3. File Upload Security
#    - Filenames are automatically sanitized (path traversal prevention)
#    - MIME types are validated against allowlist
#    - Maximum file size: 100MB
#    - Maximum files per request: 20

# 4. Allowed File Types (MIME allowlist)
#    Documents: PDF, Word, Excel, PowerPoint, Text, CSV
#    Images: JPEG, PNG, GIF, WebP, SVG
#    Archives: ZIP, RAR, 7Z, GZIP
#    Code: JavaScript, JSON, HTML, CSS

# 5. Security Logging
#    - All upload operations are logged with sanitized data
#    - Credentials are NEVER logged
#    - Failed uploads are tracked for security audit

# ============================================================================
# DEPLOYMENT CHECKLIST
# ============================================================================

# Before deploying to production:
# [ ] Set strong MINIO_ACCESS_KEY (min 20 chars, alphanumeric + special)
# [ ] Set strong MINIO_SECRET_KEY (min 40 chars, random)
# [ ] Use HTTPS endpoint (https://...)
# [ ] Set NODE_ENV=production
# [ ] Verify .env.local is in .gitignore
# [ ] Test fail-fast behavior (try starting without credentials)
# [ ] Review security logs for anomalies
# [ ] Run security test suite
